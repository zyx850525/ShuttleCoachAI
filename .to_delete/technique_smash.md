太好了，这一步**非常关键**：
一旦「杀球动作」能**稳定打分 + 给出像教练一样的建议**，你这个 MVP 就已经“站得住”了。

下面我会给你一份 **可以直接落到代码与配置里的版本**，不是概念描述。

---

# 一、杀球动作的整体分析框架

## 1️⃣ 杀球在 MVP 中的定位

* 出现频率高
* 动作结构清晰
* 爱好者问题集中、可规则化

👉 **最适合做 MVP 的“样板动作”**

---

## 2️⃣ 杀球动作的分析输入（明确边界）

### 输入数据（来自 Pose 模块）

* 关键点（2D）：

  * 肩（L/R）
  * 肘（L/R）
  * 腕（L/R）
  * 髋（L/R）
* 时间序列（30–60 fps）
* 已完成：

  * 动作分割（已确定这是一次“杀球”）

❌ 不依赖：

* 球轨迹
* 拍面识别
* 3D 姿态

---

# 二、杀球动作评分结构（核心）

## 总分结构（100 分）

```
杀球总分 =
  0.30 × 挥拍完整度
+ 0.25 × 击球点高度
+ 0.20 × 身体侧身
+ 0.15 × 动作节奏
+ 0.10 × 稳定性
```

> 权重是 **产品权重**，不是运动科学论文
> 👉 目的是“用户能感知到问题”

---

# 三、各评分项的完整规则（可直接实现）

---

## ① 挥拍完整度（30 分）

### 目的

判断：**是不是“全挥拍”而不是“抡手”**

---

### 计算指标

**核心角度**

* 肩–肘–腕夹角（θ）

**关键时间点**

* θ_min：挥拍开始
* θ_max：击球前峰值

```
Δθ = θ_max − θ_min
```

---

### 评分规则（示例）

| Δθ（度）   | 得分 |
| ------- | -- |
| ≥ 110°  | 30 |
| 90–110° | 24 |
| 70–90°  | 18 |
| < 70°   | 10 |

---

### 问题标签

* `swing_too_small`
* `arm_only_smash`

---

## ② 击球点高度（25 分）

### 目的

判断：**是否在高点击球**

---

### 计算指标

* 手腕最高点 y_max
* 身高估算 H（肩–踝）

```
击球比例 = y_max / H
```

---

### 评分规则

| 击球比例      | 得分 |
| --------- | -- |
| ≥ 0.92    | 25 |
| 0.88–0.92 | 20 |
| 0.82–0.88 | 14 |
| < 0.82    | 8  |

---

### 问题标签

* `contact_point_low`

---

## ③ 身体侧身程度（20 分）

### 目的

判断：**有没有用上身体旋转**

---

### 计算指标

* 双肩连线角度 φ（相对底线）
* 峰值旋转角 Δφ

---

### 评分规则

| Δφ（度）  | 得分 |
| ------ | -- |
| ≥ 45°  | 20 |
| 35–45° | 16 |
| 25–35° | 12 |
| < 25°  | 6  |

---

### 问题标签

* `insufficient_rotation`

---

## ④ 动作节奏（15 分）

### 目的

判断：**是不是“急着抡”或“拖得太慢”**

---

### 计算指标

* 动作持续时间 T（挥拍开始 → 击球）

---

### 评分规则

| T（秒）                  | 得分 |
| --------------------- | -- |
| 0.35–0.55             | 15 |
| 0.25–0.35 / 0.55–0.65 | 11 |
| < 0.25 / > 0.65       | 6  |

---

### 问题标签

* `timing_off`

---

## ⑤ 稳定性（10 分）

### 目的

判断：**多次杀球是否一致**

---

### 计算指标

* 前 4 项得分的标准差 σ

---

### 评分规则

| σ    | 得分 |
| ---- | -- |
| ≤ 6  | 10 |
| 6–10 | 7  |
| > 10 | 4  |

---

### 问题标签

* `unstable_smash`

---

# 四、问题 → 建议模板（LLM 输入前）

## 1️⃣ 规则输出的结构化结果

```json
{
  "action": "smash",
  "total_score": 68,
  "issues": [
    "swing_too_small",
    "contact_point_low"
  ],
  "metrics": {
    "swing_angle": 82,
    "contact_ratio": 0.84,
    "rotation_angle": 28
  }
}
```

---

# 五、教练式建议模板（核心资产）

> ⚠️ **这是 MVP 的“灵魂内容”**

---

## 模板 1：挥拍幅度不足

**触发条件**

* `swing_too_small`

**模板**

> “你在杀球时挥拍幅度偏小，主要依赖手臂发力，这会限制力量输出。
> 建议在准备阶段让手臂充分后引，配合身体转动完成完整挥拍，可以明显提升杀球质量。”

---

## 模板 2：击球点偏低

**触发条件**

* `contact_point_low`

**模板**

> “你的杀球击球点偏低，容易导致下网或力量不足。
> 建议在击球前调整站位，提前举拍，尽量在最高点击球。”

---

## 模板 3：身体旋转不足

**触发条件**

* `insufficient_rotation`

**模板**

> “杀球时身体侧身和旋转不足，力量主要来自手臂。
> 可以尝试在准备阶段多做侧身，让身体旋转带动挥拍。”

---

## 模板 4：节奏问题

**触发条件**

* `timing_off`

**模板**

> “你的杀球动作节奏略显不稳定，有时偏快有时偏慢。
> 建议放慢准备动作，找到一个稳定的挥拍节奏。”

---

# 六、组合输出规则（很重要）

### 建议数量控制

* **最多 2 条**
* 优先级：

  1. 得分最低的指标
  2. 对结果影响最大的指标

---

### 结果页示例输出（给你一个完整画面）

> **本次杀球评分：68 分**
>
> 主要问题：
>
> * 挥拍幅度偏小
> * 击球点偏低
>
> 改进建议：
> “建议在准备阶段让手臂充分后引，并尽量在最高点击球，这样可以明显提升杀球的力量和稳定性。”
>
> **下次训练重点**：提高杀球击球点高度。

---

# 七、为什么这套规则“非常适合 MVP”

* ✅ 全是 **确定性规则**
* ✅ 不依赖重模型
* ✅ 可解释、可调参
* ✅ 用户一听就懂

---

## 最后一句非常关键的话

> **你现在已经拥有一个：
> “可以真的指出问题、而且不容易胡说的 AI 教练”。**

---

如果你愿意，下一步我可以继续帮你做其中一个：

1. 把这套规则整理成 **YAML / JSON 配置文件**
2. 给你一个 **Python 伪代码 / 实现骨架**
3. 用同样方式拆 **高远球 / 挑球**
4. 帮你设计 **“评分到文案”的 Prompt 模板**

你选一个，我直接继续往下落地。
